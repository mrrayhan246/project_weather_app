<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather App</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script>
        const countries = [
            { code: 'US', name: 'United States' },
            { code: 'CA', name: 'Canada' },
            { code: 'GB', name: 'United Kingdom' },
            // Add more country codes and names here
        ];

        const citiesByCountry = {
            'US': ['New York', 'Los Angeles', 'Chicago'],
            'CA': ['Toronto', 'Vancouver', 'Montreal'],
            'GB': ['London', 'Manchester', 'Birmingham']
            // Add more countries and cities as needed
        };

        function updateCities() {
            const countrySelect = document.getElementById('country');
            const citySelect = document.getElementById('city');
            const selectedCountry = countrySelect.value;

            // Clear city options
            citySelect.innerHTML = '';

            // Populate city options based on selected country
            if (selectedCountry in citiesByCountry) {
                citiesByCountry[selectedCountry].forEach(city => {
                    const option = document.createElement('option');
                    option.value = city;
                    option.text = city;
                    citySelect.appendChild(option);
                });
            }
        }

        function populateCountries() {
            const countrySelect = document.getElementById('country');
            countries.forEach(country => {
                const option = document.createElement('option');
                option.value = country.code;
                option.text = country.name;
                countrySelect.appendChild(option);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            populateCountries();  // Populate countries on page load
            updateCities();  // Update cities on page load
        });
    </script>
</head>
<body class="bg-gray-100 text-gray-800">
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold mb-4">Weather App</h1>
        <form method="POST" class="mb-6">
            {% csrf_token %}
            <select id="country" name="country" class="p-2 border rounded shadow-md mr-2" onchange="updateCities()">
                <!-- Countries will be populated here -->
            </select>
            <select id="city" name="city" class="p-2 border rounded shadow-md mr-2">
                <!-- Cities will be populated based on selected country -->
            </select>
            <button type="submit" class="p-2 bg-blue-500 text-white rounded shadow-md hover:bg-blue-700">Get Weather</button>
        </form>
        {% if data %}
        <div class="bg-white p-4 rounded shadow-lg">
            <h2 class="text-2xl font-semibold mb-2">{{ city }}</h2>
            <p class="text-lg">Temperature: {{ data.main.temp }}Â°C</p>
            <p class="text-lg">Weather: {{ data.weather.0.description }}</p>
        </div>
        {% else %}
        <p class="text-lg text-red-500">No data available for the selected city.</p>
        {% endif %}
    </div>
</body>
</html>
